<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Testy</title>

<style>
body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; }
#app { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 10px; }
.answer { padding: 12px; margin: 8px 0; border-radius: 6px; background: #e0e0e0; cursor: pointer; }
.answer.correct { background: #7dd87d; }
.answer.wrong { background: #f27c7c; }
#stats { margin-top: 15px; font-weight: bold; }
</style>
</head>

<body>
<div id="app">
    <h2 id="question"></h2>
    <img id="questionImage" style="max-width:100%; display:none; margin:10px 0;">
    <div id="answers"></div>
    <p id="hint">Klikni na odpovÄ›Ä</p>
    <div id="stats"></div>
   <!-- TlaÄÃ­tko zpÄ›t na vÃ½bÄ›r testu -->
    <a href="../index.html" 
       style="
         display: inline-block;
         margin-top: 20px;
         background: #f44336;
         color: white;
         padding: 10px 20px;
         border-radius: 8px;
         text-decoration: none;
         font-weight: bold;
       ">
       â† ZpÄ›t na vÃ½bÄ›r testu
    </a>
</div>

<script>
let waitingForClick = false;
let answeredThisQuestion = false; // <--- novÃ¡ promÄ›nnÃ¡
let questions = [
{ id: 1, question: "PV02 KonkrÃ©tnÃ­ hasiÄ v tvaru nebo mimo nÄ›j se oslovuje", answers: [
{ id: "A", text: "hodnostÃ­ a jmÃ©nem, popÅ™. Jen jmÃ©nem nebo hodnostÃ­", correct: true },
{ id: "B", text: "evidenÄnÃ­m ÄÃ­slem", correct: false },
{ id: "C", text: "funkÄnÃ­m zaÅ™azenÃ­m", correct: false }
]},
{ id: 2, question: "PV05 NÃ¡stupovÃ½m tvarem druÅ¾stva mÅ¯Å¾e bÃ½t", answers: [
{ id: "A", text: "Å™ad nebo dvojÅ™ad", correct: true },
{ id: "B", text: "dvoustup, trojstup ÄtyÅ™stup", correct: false },
{ id: "C", text: "Å™ad, dvojÅ™ad, trojÅ™ad, ÄtyÅ™Å™ad", correct: false }
]},
{ id: 3, question: "PV06 â€Rozchodâ€œ se z pochodovÃ©ho tvaru", answers: [
{ id: "A", text: "nevelÃ­", correct: true },
{ id: "B", text: "velÃ­ na povel â€Rozchodâ€œ", correct: false },
{ id: "C", text: "velÃ­ na povel â€Volnoâ€œ", correct: false }
]},
{ id: 4, question: "PV07 NÃ¡stupovÃ½m tvarem Äety je", answers: [
{ id: "A", text: "Å™ad, dvojÅ™ad, trojÅ™ad (podle poÄtu druÅ¾stev v ÄetÄ›)", correct: true },
{ id: "B", text: "pouze dvojÅ™ad", correct: false },
{ id: "C", text: "zÃ¡stup, dvojstup, trojstup", correct: false }
]},
{ id: 5, question: "PV11 Ãškoly hasiÄe pÅ™ed nÃ¡stupem a v tvaru", answers: [
{ id: "A", text: "v tvaru bez svolenÃ­ velitele nemluvit a zachovÃ¡vat klid, sledovat velitele a jeho povely, rychle a pÅ™esnÄ› je vykonÃ¡vat a nepÅ™ekÃ¡Å¾et ostatnÃ­m", correct: true },
{ id: "B", text: "sledovat velitele a jeho povely, rychle a pÅ™esnÄ› je vykonÃ¡vat a pÅ™ekÃ¡Å¾et ostatnÃ­m nemusÃ­", correct: false },
{ id: "C", text: "v tvaru bez svolenÃ­ velitele se mluvit smÃ­, ale musÃ­ se zachovÃ¡vat klid a nemusÃ­ sledovat velitele a jeho povely", correct: false }
]},
{ id: 6, question: "PV12 PÅ™i svislÃ©m umÃ­stÄ›nÃ­ stÃ¡tnÃ­ vlajky je pÅ™i ÄelnÃ­m pohledu na objekt, na nÄ›mÅ¾ je stÃ¡tnÃ­ vlajka umÃ­stÄ›na", answers: [
{ id: "A", text: "bÃ­lÃ¡ barva vÅ¾dy vlevo a modry klÃ­n smÄ›Å™uje vÅ¾dy dolÅ¯", correct: true },
{ id: "B", text: "bÃ­lÃ¡ barva vÅ¾dy vpravo a modry klÃ­n smÄ›Å™uje vÅ¾dy dolÅ¯", correct: false },
{ id: "C", text: "bÃ­lÃ¡ barva vÅ¾dy vpravo a modry klÃ­n smÄ›Å™uje vÅ¾dy nahoru", correct: false }
]},
{ id: 7, question: "PV13 Ke vzdÃ¡vÃ¡nÃ­ pocty pÅ™i odhalovÃ¡nÃ­ pomnÃ­kÅ¯ a pamÃ¡tnÃ­kÅ¯, pÅ™i pohÅ™bech, odhalovÃ¡nÃ­ pamÄ›tnÃ­ch desek, pietnÃ­ch aktech", answers: [
{ id: "A", text: "se urÄuje ÄestnÃ¡ jednotka", correct: true },
{ id: "B", text: "se urÄuje ÄestnÃ¡ skupina", correct: false },
{ id: "C", text: "se urÄuje ÄestnÃ¡ strÃ¡Å¾", correct: false }
]},
{ id: 8, question: "PV14 Pokud se slavnostnÃ­ pÅ™ehlÃ­dky zÃºÄastnÃ­ poÅ¾Ã¡rnÃ­ technika", answers: [
{ id: "A", text: "Å™adÃ­ se tato vlevo od nastoupenÃ½ch jednotek nebo za nÄ›.", correct: true },
{ id: "B", text: "Å™adÃ­ se vpravo", correct: false },
{ id: "C", text: "Å™adÃ­ se vpÅ™edu", correct: false }
]},
{ id: 9, question: "PV15 MÃ­sto nÃ¡stupu k soutÄ›Å¾i urÄÃ­", answers: [
{ id: "A", text: "velitel soutÄ›Å¾e", correct: true },
{ id: "B", text: "vedoucÃ­ rozhodÄÃ­ch", correct: false },
{ id: "C", text: "velitelÃ© druÅ¾stev po vzÃ¡jemnÃ© domluvÄ›", correct: false }
]},
{ id: 10, question: "PV16 Å˜ad", answers: [
{ id: "A", text: "je tvar, v nÄ›mÅ¾ hasiÄi stojÃ­ vedle sebe na stejnÃ© Ãºrovni.", correct: true },
{ id: "B", text: "je pochodovÃ½ tvar, v nÄ›mÅ¾ jsou hasiÄi seÅ™azeni v zÃ¡krytu za sebou.", correct: false },
{ id: "C", text: "je tvar, kterÃ½ tvoÅ™Ã­ Å™ady za sebou na vzdÃ¡lenost pÅ™edpaÅ¾enÃ­.", correct: false }
]},
{ id: 11, question: "PV17 PÅ™i povelu POHOV!", answers: [
{ id: "A", text: "hasiÄ zÅ¯stÃ¡vÃ¡ na svÃ©m mÃ­stÄ›", correct: true },
{ id: "B", text: "hasiÄ mÅ¯Å¾e odejÃ­t z tvaru", correct: false },
{ id: "C", text: "hasiÄ mÅ¯Å¾e odejÃ­t z tvaru a bavit se", correct: false }
]},
{ id: 12, question: "PV18 PoÅ™adovÃ½ krok se uÅ¾Ã­vÃ¡", answers: [
{ id: "A", text: "pÅ™i vypochodovanÃ­ z tvaru, pÅ™i vzdÃ¡vÃ¡nÃ­ pocty za pochodu, pÅ™i pÅ™Ã­chodu k nadÅ™Ã­zenÃ©mu a pÅ™i poÅ™adovÃ©m vÃ½cviku za pohybu po povelu â€POZORâ€œ", correct: true },
{ id: "B", text: "jen pÅ™i vypochodovÃ¡nÃ­ z tvaru", correct: false },
{ id: "C", text: "pÅ™i vypochodovanÃ­ z tvaru, pÅ™i vzdÃ¡vÃ¡nÃ­ pocty za pochodu, pÅ™i pÅ™Ã­chodu k nadÅ™Ã­zenÃ©mu a pÅ™i vstupu do jÃ­delny", correct: false }
]},
{ id: 13, question: "PV19 V tvaru zdravÃ­ rukou", answers: [
{ id: "A", text: "jen velitel tvaru", correct: true },
{ id: "B", text: "jen hasiÄi s niÅ¾Å¡Ã­ hodnostÃ­ neÅ¾ velitel tvaru", correct: false },
{ id: "C", text: "vÅ¡ichni hasiÄi stojÃ­cÃ­ v prvnÃ­ Å™adÄ›", correct: false }
]},
{ id: 14, question: "PV20 HasiÄi a jednotka PO vzdÃ¡vajÃ­ poctu mimo jinÃ© i", answers: [
{ id: "A", text: "stÃ¡tnÃ­ vlajce, standartÄ› prezidenta, stÃ¡tnÃ­ hymnÄ›", correct: true },
{ id: "B", text: "svatebnÃ­mu prÅ¯vodu", correct: false },
{ id: "C", text: "vozidlu ministra vnitra", correct: false }
]},
{ id: 15, question: "PV21 Do sluÅ¾ebnÃ­ mÃ­stnosti vstupuje pÅ™Ã­sluÅ¡nÃ­k", answers: [
{ id: "A", text: "vÅ¾dy bez pokrÃ½vky hlavy /mimo zÃ¡sah/", correct: true },
{ id: "B", text: "jen pokud je mÃ­stnost otevÅ™enÃ¡", correct: false },
{ id: "C", text: "vÅ¾dy s nejbliÅ¾Å¡Ã­m pÅ™Ã­mÃ½m nadÅ™Ã­zenÃ½m", correct: false }
  ]}
];

let unanswered = shuffle([...questions]); // fronta otÃ¡zek
let wrongQuestions = []; // Å¡patnÃ© odpovÄ›di
let stats = { correct: 0, wrong: 0 };

showQuestion();

document.getElementById("app").addEventListener("click", (e) => {
    if (!waitingForClick) return;
    if (e.target.classList.contains("answer")) return;

    waitingForClick = false;
    showQuestion();
});

function showQuestion() {
    answeredThisQuestion = false;   // odblokuje kliky pro novou otÃ¡zku
    document.getElementById("hint").innerText = "Klikni na odpovÄ›Ä";

    if (unanswered.length === 0) {
        document.getElementById("question").innerText = "Test dokonÄen ğŸ‰";
        document.getElementById("answers").innerHTML = "";
        updateStats();
        return;
    }

    const currentIndex = Math.floor(Math.random() * unanswered.length);
    const q = unanswered[currentIndex];

    document.getElementById("question").innerText = q.question;

const img = document.getElementById("questionImage");

if (q.questionImage) {
    img.src = q.questionImage;
    img.style.display = "block";
} else {
    img.style.display = "none";
}

    const answersDiv = document.getElementById("answers");
    answersDiv.innerHTML = "";

    shuffle(q.answers).forEach(a => {
        const div = document.createElement("div");
        div.className = "answer";
        div.innerText = a.text;

       div.onclick = () => {
    if (answeredThisQuestion) return;  // blokuje vÃ­cenÃ¡sobnÃ© kliky
    answeredThisQuestion = true;       // hned po prvnÃ­m kliknutÃ­ zamkne
    if (waitingForClick) return;

    document.querySelectorAll(".answer").forEach(el => {
        const ansObj = q.answers.find(x => x.text === el.innerText);
        el.classList.add(ansObj.correct ? "correct" : "wrong");
    });

    if (a.correct) {
        stats.correct++;
        unanswered.splice(currentIndex, 1);

        updateStats();
        setTimeout(showQuestion, 1000); // sprÃ¡vnÄ› â†’ automaticky
    } else {
        stats.wrong++;
        waitingForClick = true;

        document.getElementById("hint").innerText =
            "âŒ Å patnÄ› â€“ klikni kamkoliv pro pokraÄovÃ¡nÃ­";

        wrongQuestions.push({
            question: q.question,
            correctAnswer: q.answers.find(x => x.correct).text,
            userAnswer: a.text
        });

        updateStats();
    }
};

        answersDiv.appendChild(div);
    });
}

function updateStats() {
    document.getElementById("stats").innerHTML =
        `âœ… SprÃ¡vnÄ›: ${stats.correct} | âŒ Å patnÄ›: ${stats.wrong}`;
}

// jednoduchÃ© zamÃ­chÃ¡nÃ­ pole
function shuffle(arr) {
    return arr.sort(() => Math.random() - 0.5);
}
</script>
</body>
</html>
