<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Testy</title>

<style>
body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; }
#app { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 10px; }
.answer { padding: 12px; margin: 8px 0; border-radius: 6px; background: #e0e0e0; cursor: pointer; }
.answer.correct { background: #7dd87d; }
.answer.wrong { background: #f27c7c; }
#stats { margin-top: 15px; font-weight: bold; }
</style>
</head>

<body>
<div id="app">
    <h2 id="question"></h2>
    <img id="questionImage" style="max-width:100%; display:none; margin:10px 0;">
    <div id="answers"></div>
    <p id="hint">Klikni na odpovÄ›Ä</p>
    <div id="stats"></div>
   <!-- TlaÄÃ­tko zpÄ›t na vÃ½bÄ›r testu -->
    <a href="../index.html" 
       style="
         display: inline-block;
         margin-top: 20px;
         background: #f44336;
         color: white;
         padding: 10px 20px;
         border-radius: 8px;
         text-decoration: none;
         font-weight: bold;
       ">
       â† ZpÄ›t na vÃ½bÄ›r testu
    </a>
</div>

<script>
let waitingForClick = false;
let answeredThisQuestion = false; // <--- novÃ¡ promÄ›nnÃ¡
let questions = [
{ id: 1, question: "PP06 Co je to kriminalistickÃ© ohnisko", answers: [
{ id: "A", text: "je to mÃ­sto faktickÃ©ho vzniku poÅ¾Ã¡ru", correct: true },
{ id: "B", text: "je to mÃ­sto nejintenzivnÄ›jÅ¡Ã­ho hoÅ™enÃ­", correct: false },
{ id: "C", text: "je to mÃ­sto prvnÃ­ho zpozorovÃ¡nÃ­ poÅ¾Ã¡ru urÄitou osobou", correct: false }
]},
{ id: 2, question: "PP20 Mezi pasivnÃ­ prvky pro zajiÅ¡tÄ›nÃ­ poÅ¾Ã¡rnÃ­ bezpeÄnosti staveb patÅ™Ã­", answers: [
{ id: "A", text: "poÅ¾Ã¡rnÃ­ stÄ›na", correct: true },
{ id: "B", text: "autonomnÃ­ hlÃ¡siÄ kouÅ™e", correct: false },
{ id: "C", text: "nouzovÃ© osvÄ›tlenÃ­", correct: false }
]},
{ id: 3, question: "PP21 VzduchotechnickÃ¡ zaÅ™Ã­zenÃ­ se navrhujÃ­ a realizujÃ­", answers: [
{ id: "A", text: "tak, aby se jimi nebo po nich nemohl Å¡Ã­Å™it poÅ¾Ã¡r nebo jeho zplodiny do jinÃ½ch poÅ¾Ã¡rnÃ­ch ÃºsekÅ¯.", correct: true },
{ id: "B", text: "bez ohledu na rozÅ¡Ã­Å™enÃ­ poÅ¾Ã¡ru nebo jeho zplodin.", correct: false },
{ id: "C", text: "tak, aby se jimi nebo po nich nemohl Å¡Ã­Å™it poÅ¾Ã¡r nebo jeho zplodiny v rÃ¡mci poÅ¾Ã¡rnÃ­ho Ãºseku.", correct: false }
]},
{ id: 4, question: "PP22 Kolem budovy vznikÃ¡ prostor, ve kterÃ©m je nebezpeÄÃ­ pÅ™enesenÃ­ poÅ¾Ã¡ru sÃ¡lÃ¡nÃ­m tepla nebo padajÃ­cÃ­mi hoÅ™Ã­cÃ­mi ÄÃ¡stmi konstrukce a nazÃ½vÃ¡ se", answers: [
{ id: "A", text: "poÅ¾Ã¡rnÄ› nebezpeÄnÃ½ prostor", correct: true },
{ id: "B", text: "odstupovÃ¡ vzdÃ¡lenost", correct: false },
{ id: "C", text: "troskovÃ½ stÃ­n", correct: false }
]},
{ id: 5, question: "PP22 Mezi vyhrazenÃ© poÅ¾Ã¡rnÄ› bezpeÄnostnÃ­ zaÅ™Ã­zenÃ­ patÅ™Ã­", answers: [
{ id: "A", text: "elektrickÃ¡ poÅ¾Ã¡rnÃ­ signalizace", correct: true },
{ id: "B", text: "autonomnÃ­ hlÃ¡siÄ kouÅ™e", correct: false },
{ id: "C", text: "nouzovÃ© osvÄ›tlenÃ­", correct: false }
]},
{ id: 6, question: "PP25 VnitÅ™nÃ­ zÃ¡sahovou cestu tvoÅ™Ã­", answers: [
{ id: "A", text: "chrÃ¡nÄ›nÃ¡ ÃºnikovÃ¡ cesta typu B nebo C", correct: true },
{ id: "B", text: "poÅ¾Ã¡rnÃ­ lÃ¡vky", correct: false },
{ id: "C", text: "poÅ¾Ã¡rnÃ­ Å¾ebÅ™Ã­ky", correct: false }
]},
{ id: 7, question: "PP26 Dokument, Å™eÅ¡Ã­cÃ­ pouze problematiku poÅ¾Ã¡rnÃ­ bezpeÄnost stavby se nazÃ½vÃ¡", answers: [
{ id: "A", text: "PoÅ¾Ã¡rnÄ› bezpeÄnostnÃ­ Å™eÅ¡enÃ­", correct: true },
{ id: "B", text: "PoÅ¾Ã¡rnÃ­ expertÃ­znÃ­ zprÃ¡va", correct: false },
{ id: "C", text: "SouhrnnÃ¡ technickÃ¡ zprÃ¡va", correct: false }
]},
{ id: 8, question: "PP27 ElektrickÃ¡ poÅ¾Ã¡rnÃ­ signalizace slouÅ¾Ã­ k", answers: [
{ id: "A", text: "vÄasnÃ©mu zjiÅ¡tÄ›nÃ­ vznikajÃ­cÃ­ho poÅ¾Ã¡ru", correct: true },
{ id: "B", text: "lokalizaci a uhaÅ¡enÃ­ vznikajÃ­cÃ­ho poÅ¾Ã¡ru", correct: false },
{ id: "C", text: "odvÄ›trÃ¡nÃ­ zplodin hoÅ™enÃ­ pÅ™i poÅ¾Ã¡ru", correct: false }
]},
{ id: 9, question: "PP27 PÅ™irozenÃ½ odvod kouÅ™e a tepla", answers: [
{ id: "A", text: "vyuÅ¾Ã­vÃ¡ principu vztlaku horkÃ½ch plynÅ¯, kterÃ© vznikajÃ­ pÅ™i poÅ¾Ã¡ru a vytvÃ¡Å™ejÃ­ komÃ­novÃ½ efekt", correct: true },
{ id: "B", text: "je zaloÅ¾en na principu vytvÃ¡Å™enÃ­ podtlaku Äi pÅ™etlaku v prostoru zasaÅ¾enÃ©m poÅ¾Ã¡rem prostÅ™ednictvÃ­m poÅ¾Ã¡rnÃ­ch ventilÃ¡torÅ¯", correct: false },
{ id: "C", text: "sniÅ¾uje ÃºroveÅˆ neutrÃ¡lnÃ­ roviny pod 2,5 metrÅ¯", correct: false }
]},
{ id: 10, question: "PP31 Je dÅ¯leÅ¾itÃ© zachovÃ¡nÃ­ kriminalistickÃ©ho ohniska poÅ¾Ã¡ru", answers: [
{ id: "A", text: "je to dÅ¯leÅ¾itÃ© z hlediska stanovenÃ­ pÅ™Ã­Äiny vzniku poÅ¾Ã¡ru a pÅ™Ã­padnÃ½ch dalÅ¡Ã­ch ÃºkonÅ¯ v rÃ¡mci vÃ½konu SPD", correct: true },
{ id: "B", text: "bude staÄit jen slovnÃ­ popis od zasahujÃ­cÃ­ch hasiÄÅ¯", correct: false },
{ id: "C", text: "nenÃ­ to dÅ¯leÅ¾itÃ©", correct: false }
]},
{ id: 11, question: "PP32 Kdo mÅ¯Å¾e provÃ¡dÄ›t ÄiÅ¡tÄ›nÃ­ spalinovÃ© cesty pÅ™ipojenÃ©ho spotÅ™ebiÄe o vÃ½konu nad 50 kw", answers: [
{ id: "A", text: "oprÃ¡vnÄ›nÃ¡ osoba", correct: true },
{ id: "B", text: "fyzickÃ¡ osoba svÃ©pomocÃ­", correct: false },
{ id: "C", text: "pouze reviznÃ­ technik spalinovÃ½ch cest", correct: false }
  ]}
];

let unanswered = shuffle([...questions]); // fronta otÃ¡zek
let wrongQuestions = []; // Å¡patnÃ© odpovÄ›di
let stats = { correct: 0, wrong: 0 };

showQuestion();

document.getElementById("app").addEventListener("click", (e) => {
    if (!waitingForClick) return;
    if (e.target.classList.contains("answer")) return;

    waitingForClick = false;
    showQuestion();
});

function showQuestion() {
    answeredThisQuestion = false;   // odblokuje kliky pro novou otÃ¡zku
    document.getElementById("hint").innerText = "Klikni na odpovÄ›Ä";

    if (unanswered.length === 0) {
        document.getElementById("question").innerText = "Test dokonÄen ğŸ‰";
        document.getElementById("answers").innerHTML = "";
        updateStats();
        return;
    }

    const currentIndex = Math.floor(Math.random() * unanswered.length);
    const q = unanswered[currentIndex];

    document.getElementById("question").innerText = q.question;

const img = document.getElementById("questionImage");

if (q.questionImage) {
    img.src = q.questionImage;
    img.style.display = "block";
} else {
    img.style.display = "none";
}

    const answersDiv = document.getElementById("answers");
    answersDiv.innerHTML = "";

    shuffle(q.answers).forEach(a => {
        const div = document.createElement("div");
        div.className = "answer";
        div.innerText = a.text;

       div.onclick = () => {
    if (answeredThisQuestion) return;  // blokuje vÃ­cenÃ¡sobnÃ© kliky
    answeredThisQuestion = true;       // hned po prvnÃ­m kliknutÃ­ zamkne
    if (waitingForClick) return;

    document.querySelectorAll(".answer").forEach(el => {
        const ansObj = q.answers.find(x => x.text === el.innerText);
        el.classList.add(ansObj.correct ? "correct" : "wrong");
    });

    if (a.correct) {
        stats.correct++;
        unanswered.splice(currentIndex, 1);

        updateStats();
        setTimeout(showQuestion, 1000); // sprÃ¡vnÄ› â†’ automaticky
    } else {
        stats.wrong++;
        waitingForClick = true;

        document.getElementById("hint").innerText =
            "âŒ Å patnÄ› â€“ klikni kamkoliv pro pokraÄovÃ¡nÃ­";

        wrongQuestions.push({
            question: q.question,
            correctAnswer: q.answers.find(x => x.correct).text,
            userAnswer: a.text
        });

        updateStats();
    }
};

        answersDiv.appendChild(div);
    });
}

function updateStats() {
    document.getElementById("stats").innerHTML =
        `âœ… SprÃ¡vnÄ›: ${stats.correct} | âŒ Å patnÄ›: ${stats.wrong}`;
}

// jednoduchÃ© zamÃ­chÃ¡nÃ­ pole
function shuffle(arr) {
    return arr.sort(() => Math.random() - 0.5);
}
</script>
</body>
</html>
